const e="f4ef3141-15e3-4cfc-a4f3-d2587cfcd98a",t="M"+e,n="T"+e;var r=e=>({value:new Promise((t=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=t,n.postMessage(e)}))})
/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:s,Map:a,SharedArrayBuffer:o,Uint16Array:i}=globalThis,{BYTES_PER_ELEMENT:c}=s,{BYTES_PER_ELEMENT:l}=i,{isArray:f}=Array,{notify:p,wait:u,waitAsync:y}=Atomics,{fromCharCode:g}=String,w=new WeakSet,d=new WeakMap;let h=0;const m=(t,{parse:n,stringify:m,transform:b,interrupt:v}=JSON)=>{if(!d.has(t)){const E=(n,...r)=>t.postMessage({[e]:r},{transfer:n}),P="function"==typeof v?v:v?.handler||(()=>{}),M=v?.delay||42,k=(e,t)=>e?(y||r)(t,0):(((e,t,n)=>{for(;"timed-out"===u(e,0,0,t);)n()})(t,M,P),{value:{then:e=>e()}});let T=!1;d.set(t,new Proxy(new a,{has:(e,t)=>"string"==typeof t&&!t.startsWith("_"),get:(e,r)=>"then"===r?null:(...e)=>{const a=h++;let f=new s(new o(c)),p=[];w.has(e.at(-1)||p)&&w.delete(p=e.pop()),E(p,a,f,r,b?e.map(b):e);const u=t!==globalThis;let y=0;return T&&u&&(y=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${r}(...args) is awaited`)),k(u,f).value.then((()=>{clearTimeout(y);const e=f[0];if(!e)return;const t=l*e;return f=new s(new o(t+t%c)),E([],a,f),k(u,f).value.then((()=>n(g(...new i(f.buffer).slice(0,e)))))}))},set(n,r,s){if(!n.size){const r=new a;t.addEventListener("message",(async t=>{const s=t.data?.[e];if(f(s)){t.stopImmediatePropagation();const[e,a,...o]=s;if(o.length){const[t,s]=o;if(!n.has(t))throw new Error(`Unsupported action: ${t}`);T=!0;try{const o=await n.get(t)(...s);if(void 0!==o){const t=m(b?b(o):o);r.set(e,t),a[0]=t.length}}finally{T=!1}}else{const t=r.get(e);r.delete(e);for(let e=new i(a.buffer),n=0;n<t.length;n++)e[n]=t.charCodeAt(n)}p(a,0)}}))}return!!n.set(r,s)}}))}return d.get(t)};m.transfer=(...e)=>(w.add(e),e);const b="object",v="function",E="number",P="string",M="undefined",k="symbol",{defineProperty:T,getOwnPropertyDescriptor:A,getPrototypeOf:x,isExtensible:W,ownKeys:S,preventExtensions:O,set:C,setPrototypeOf:L}=Reflect,{assign:R,create:D}=Object,$=x(Int8Array),_="isArray",B=(e,t)=>{const{get:n,set:r,value:s}=e;return n&&(e.get=t(n)),r&&(e.set=t(r)),s&&(e.value=t(s)),e},j=(e,t)=>[e,t],z=e=>t=>{const n=typeof t;switch(n){case b:if(null==t)return j("null",t);if(t===globalThis)return j(b,null);case v:return e(n,t);case"boolean":case E:case P:case M:case"bigint":return j(n,t);case k:if(I.has(t))return j(n,I.get(t))}throw new Error(`Unable to handle this ${n} type`)},I=new Map(S(Symbol).filter((e=>typeof Symbol[e]===k)).map((e=>[Symbol[e],e]))),N=e=>{for(const[t,n]of I)if(n===e)return t};function U(){return this}const F="apply",K="construct",Y="defineProperty",J="deleteProperty",q="get",G="getOwnPropertyDescriptor",H="getPrototypeOf",Q="has",V="isExtensible",X="ownKeys",Z="preventExtensions",ee="set",te="setPrototypeOf",ne="delete";var re=((e,t)=>{const n=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;T(EventTarget.prototype,"addEventListener",{value(t,r,...s){return s.at(0)?.invoke&&(n.has(this)||n.set(this,new Map),n.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,r,...s)}})}const r=t&&(e=>{const{currentTarget:t,target:r,type:s}=e;for(const a of n.get(t||r)?.get(s)||[])e[a]()});return(n,s,a,...o)=>{let i=0;const c=new Map,l=new Map,{[a]:f}=n,p=o.length?R(D(globalThis),...o):globalThis,u=z(((e,t)=>{if(!c.has(t)){let e;for(;l.has(e=i++););c.set(t,e),l.set(e,t)}return j(e,c.get(t))})),y=new FinalizationRegistry((e=>{f(ne,j(P,e))})),g=([e,n])=>{switch(e){case b:if(null==n)return p;if(typeof n===E)return l.get(n);if(!(n instanceof $))for(const e in n)n[e]=g(n[e]);return n;case v:if(typeof n===P){if(!l.has(n)){const e=function(...e){return t&&e.at(0)instanceof Event&&r(...e),f(F,j(v,n),u(this),e.map(u))},s=new WeakRef(e);l.set(n,s),y.register(e,n,s)}return l.get(n).deref()}return l.get(n);case k:return N(n)}return n},w={[F]:(e,t,n)=>u(e.apply(t,n)),[K]:(e,t)=>u(new e(...t)),[Y]:(e,t,n)=>u(T(e,t,n)),[J]:(e,t)=>u(delete e[t]),[H]:e=>u(x(e)),[q]:(e,t)=>u(e[t]),[G]:(e,t)=>{const n=A(e,t);return n?j(b,B(n,u)):j(M,n)},[Q]:(e,t)=>u(t in e),[V]:e=>u(W(e)),[X]:e=>j(b,S(e).map(u)),[Z]:e=>u(O(e)),[ee]:(e,t,n)=>u(C(e,t,n)),[te]:(e,t)=>u(L(e,t)),[ne](e){c.delete(l.get(e)),l.delete(e)}};return n[s]=(e,t,...n)=>{switch(e){case F:n[0]=g(n[0]),n[1]=n[1].map(g);break;case K:n[0]=n[0].map(g);break;case Y:{const[e,t]=n;n[0]=g(e);const{get:r,set:s,value:a}=t;r&&(t.get=g(r)),s&&(t.set=g(s)),a&&(t.value=g(a));break}default:n=n.map(g)}return w[e](g(t),...n)},{proxy:n,[e.toLowerCase()]:p,[`is${e}Proxy`]:()=>!1}}})("Window",!0),se=(e=>{let t=0;const n=new Map,r=new Map,s=Symbol(),a=e=>typeof e===v?e():e,o=e=>typeof e===b&&!!e&&s in e,i=Array[_],c=z(((e,o)=>{if(s in o)return a(o[s]);if(e===v){if(!r.has(o)){let e;for(;r.has(e=String(t++)););n.set(o,e),r.set(e,o)}return j(e,n.get(o))}if(!(o instanceof $))for(const e in o)o[e]=c(o[e]);return j(e,o)}));return(t,l,f)=>{const{[l]:p}=t,u=new Map,y=new FinalizationRegistry((e=>{u.delete(e),p(ne,c(e))})),g=e=>{const[t,n]=e;if(!u.has(n)){const r=t===v?U.bind(e):e,s=new Proxy(r,h),a=new WeakRef(s);u.set(n,a),y.register(s,n,a)}return u.get(n).deref()},w=e=>{const[t,n]=e;switch(t){case b:return null===n?globalThis:typeof n===E?g(e):n;case v:return typeof n===P?r.get(n):g(e);case k:return N(n)}return n},d=(e,t,...n)=>w(p(e,a(t),...n)),h={[F]:(e,t,n)=>d(F,e,c(t),n.map(c)),[K]:(e,t)=>d(K,e,t.map(c)),[Y]:(e,t,n)=>{const{get:r,set:s,value:a}=n;return typeof r===v&&(n.get=c(r)),typeof s===v&&(n.set=c(s)),typeof a===v&&(n.value=c(a)),d(Y,e,c(t),n)},[J]:(e,t)=>d(J,e,c(t)),[H]:e=>d(H,e),[q]:(e,t)=>t===s?e:d(q,e,c(t)),[G]:(e,t)=>{const n=d(G,e,c(t));return n&&B(n,w)},[Q]:(e,t)=>t===s||d(Q,e,c(t)),[V]:e=>d(V,e),[X]:e=>d(X,e).map(w),[Z]:e=>d(Z,e),[ee]:(e,t,n)=>d(ee,e,c(t),c(n)),[te]:(e,t)=>d(te,e,c(t))};t[f]=(e,t,s,a)=>{switch(e){case F:return w(t).apply(w(s),a.map(w));case ne:{const e=w(t);n.delete(r.get(e)),r.delete(e)}}};const m=new Proxy([b,null],h),M=m.Array[_];return T(Array,_,{value:e=>o(e)?M(e):i(e)}),{[e.toLowerCase()]:m,[`is${e}Proxy`]:o,proxy:t}}})("Window"),ae="function"==typeof Worker?Worker:class{};const oe=new WeakMap,ie=(e,...r)=>{const s=m(e,...r);if(!oe.has(s)){const r=e instanceof ae?re:se;oe.set(s,r(s,t,n))}return oe.get(s)};ie.transfer=m.transfer;export{ie as default};
