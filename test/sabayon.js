const{isArray:e}=Array,{join:t}=[],s=new Map,n=e=>{e.stopImmediatePropagation(),e.preventDefault()};var o=Object.freeze({__proto__:null,activate:e=>e.waitUntil(clients.claim()),fetch:e=>{const{request:o}=e;"POST"===o.method&&o.url===`${location.href}?sabayon`&&(n(e),e.respondWith(o.json().then((async e=>{const{promise:n,resolve:a}=Promise.withResolvers(),r=e.join(",");s.set(r,a);for(const t of await clients.matchAll())t.postMessage(e);return n.then((e=>new Response(`[${t.call(e,",")}]`,o.headers)))}))))},message:t=>{const{data:o}=t;if(e(o)&&4===o.length){const[e,a,r,i]=o,c=[e,a,r].join(",");s.has(c)&&(n(t),s.get(c)(i),s.delete(c))}}});for(const e in o)addEventListener(e,o[e]);
