const e="function",t="453c2f8b-9a5b-47f8-81f8-6e865d417c8d";var s=e=>({value:new Promise((t=>{let s=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");s.onmessage=t,s.postMessage(e)}))})
/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:a,Map:n,SharedArrayBuffer:r,Uint16Array:o}=globalThis,{BYTES_PER_ELEMENT:i}=a,{BYTES_PER_ELEMENT:l}=o,{isArray:c}=Array,{notify:f,wait:d,waitAsync:w}=Atomics,p=new WeakSet,g=new WeakMap,u={value:{then:e=>e()}};let h=0;const y=(y,{parse:E=JSON.parse,stringify:m=JSON.stringify,transform:b,interrupt:A}=JSON)=>{if(!g.has(y)){const T=(e,...s)=>y.postMessage({[t]:s},{transfer:e}),v=typeof A===e?A:A?.handler,M=A?.delay||42,S=new TextDecoder("utf-16"),P=(e,t)=>e?(w||s)(t,0):(v?((e,t,s)=>{for(;"timed-out"===d(e,0,0,t);)s()})(t,M,v):d(t,0),u);let N=!1;g.set(y,new Proxy(new n,{has:(e,t)=>"string"==typeof t&&!t.startsWith("_"),get:(e,t)=>"then"===t?null:(...e)=>{const s=h++;let n=new a(new r(2*i)),c=[];p.has(e.at(-1)||c)&&p.delete(c=e.pop()),T(c,s,n,t,b?e.map(b):e);const f=y!==globalThis;let d=0;return N&&f&&(d=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${t}(...args) is awaited`)),P(f,n).value.then((()=>{clearTimeout(d);const e=n[1];if(!e)return;const t=l*e;return n=new a(new r(t+t%i)),T([],s,n),P(f,n).value.then((()=>E(S.decode(new o(n.buffer).slice(0,e)))))}))},set(s,a,r){const i=typeof r;if(i!==e)throw new Error(`Unable to assign ${a} as ${i}`);if(!s.size){const e=new n;y.addEventListener("message",(async a=>{const n=a.data?.[t];if(c(n)){a.stopImmediatePropagation();const[t,r,...i]=n;let l;if(i.length){const[a,n]=i;if(s.has(a)){N=!0;try{const o=await s.get(a)(...n);if(void 0!==o){const s=m(b?b(o):o);e.set(t,s),r[1]=s.length}}catch(e){l=e}finally{N=!1}}else l=new Error(`Unsupported action: ${a}`);r[0]=1}else{const s=e.get(t);e.delete(t);for(let e=new o(r.buffer),t=0;t<s.length;t++)e[t]=s.charCodeAt(t)}if(f(r,0),l)throw l}}))}return!!s.set(a,r)}}))}return g.get(y)};y.transfer=(...e)=>(p.add(e),e);export{y as default};
