const e="453c2f8b-9a5b-47f8-81f8-6e865d417c8d",t="M"+e,r="T"+e,n="array",s="function",o="null",a="number",i="object",c="string",l="symbol",f="undefined",u="apply",p="construct",y="defineProperty",g="deleteProperty",w="get",d="getOwnPropertyDescriptor",h="getPrototypeOf",b="has",m="isExtensible",v="ownKeys",E="preventExtensions",P="set",k="setPrototypeOf",T="delete";var M=e=>({value:new Promise((t=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=t,r.postMessage(e)}))})
/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:S,Map:x,SharedArrayBuffer:A,Uint16Array:W}=globalThis,{BYTES_PER_ELEMENT:O}=S,{BYTES_PER_ELEMENT:$}=W,{isArray:L}=Array,{notify:D,wait:R,waitAsync:C}=Atomics,N=new WeakSet,_=new WeakMap,j={value:{then:e=>e()}};let B=0;const U=(t,{parse:r=JSON.parse,stringify:n=JSON.stringify,transform:o,interrupt:a}=JSON)=>{if(!_.has(t)){const i=(r,...n)=>t.postMessage({[e]:n},{transfer:r}),c=typeof a===s?a:a?.handler,l=a?.delay||42,f=new TextDecoder("utf-16"),u=(e,t)=>e?(C||M)(t,0):(c?((e,t,r)=>{for(;"timed-out"===R(e,0,0,t);)r()})(t,l,c):R(t,0),j);let p=!1;_.set(t,new Proxy(new x,{[b]:(e,t)=>"string"==typeof t&&!t.startsWith("_"),[w]:(e,n)=>"then"===n?null:(...e)=>{const s=B++;let a=new S(new A(2*O)),c=[];N.has(e.at(-1)||c)&&N.delete(c=e.pop()),i(c,s,a,n,o?e.map(o):e);const l=t!==globalThis;let y=0;return p&&l&&(y=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${n}(...args) is awaited`)),u(l,a).value.then((()=>{clearTimeout(y);const e=a[1];if(!e)return;const t=$*e;return a=new S(new A(t+t%O)),i([],s,a),u(l,a).value.then((()=>r(f.decode(new W(a.buffer).slice(0,e)))))}))},[P](r,a,i){const c=typeof i;if(c!==s)throw new Error(`Unable to assign ${a} as ${c}`);if(!r.size){const s=new x;t.addEventListener("message",(async t=>{const a=t.data?.[e];if(L(a)){t.stopImmediatePropagation();const[e,i,...c]=a;let l;if(c.length){const[t,a]=c;if(r.has(t)){p=!0;try{const c=await r.get(t)(...a);if(void 0!==c){const t=n(o?o(c):c);s.set(e,t),i[1]=t.length}}catch(e){l=e}finally{p=!1}}else l=new Error(`Unsupported action: ${t}`);i[0]=1}else{const t=s.get(e);s.delete(e);for(let e=new W(i.buffer),r=0;r<t.length;r++)e[r]=t.charCodeAt(r)}if(D(i,0),l)throw l}}))}return!!r.set(a,i)}}))}return _.get(t)};U.transfer=(...e)=>(N.add(e),e);const{isArray:I}=Array,J=(e,t)=>t,z=e=>typeof e===s?(e=>e())(e):e;function F(){return this}const K=(e,t)=>e===n?[t]:{t:e,v:t},Y=(e,t=J)=>{let r=typeof e,s=e;return r===i&&(I(e)?(r=n,s=e.at(0)):({t:r,v:s}=e)),t(r,s)},H=(e,t)=>e===s?t:K(e,t),q=(e,t=H)=>{const r=null===e?o:typeof e;return t(r===i&&I(e)?n:r,e)},G=new FinalizationRegistry((([e,t,r])=>{r&&console.debug(`Held value ${String(t)} not relevant anymore`),e(t)})),Q=Object.create(null),V=(e,t,{debug:r,return:n,token:s=e}=Q)=>{const o=n||new Proxy(e,Q),a=[o,[t,e,!!r]];return!1!==s&&a.push(s),G.register(...a),o},{defineProperty:X,deleteProperty:Z,getOwnPropertyDescriptor:ee,getPrototypeOf:te,isExtensible:re,ownKeys:ne,preventExtensions:se,set:oe,setPrototypeOf:ae}=Reflect,{assign:ie,create:ce}=Object,le=te(Int8Array),fe=(e,t)=>{const{get:r,set:n,value:s}=e;return r&&(e.get=t(r)),n&&(e.set=t(n)),s&&(e.value=t(s)),e},ue=e=>t=>q(t,((t,r)=>{switch(t){case o:return K(o,r);case i:if(r===globalThis)return K(t,null);case n:case s:return e(t,r);case"boolean":case a:case c:case f:case"bigint":return K(t,r);case l:{if(pe.has(r))return K(t,pe.get(r));let e=Symbol.keyFor(r);if(e)return K(t,`.${e}`)}}throw new TypeError(`Unable to handle this ${t}: ${String(r)}`)})),pe=new Map(ne(Symbol).filter((e=>typeof Symbol[e]===l)).map((e=>[Symbol[e],e]))),ye=e=>{if(e.startsWith("."))return Symbol.for(e.slice(1));for(const[t,r]of pe)if(r===e)return t},ge=e=>e;var we=((e,t)=>{const r=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;X(EventTarget.prototype,"addEventListener",{value(t,n,...s){return s.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,n,...s)}})}const o=t&&(e=>{const{currentTarget:t,target:n,type:s}=e;for(const o of r.get(t||n)?.get(s)||[])e[o]()});return function(r,M,S,...x){let A=0,W=this?.transform||ge;const O=new Map,$=new Map,{[S]:L}=r,D=x.length?ie(ce(globalThis),...x):globalThis,R=ue(((e,t)=>{if(!O.has(t)){let r;for(;$.has(r=A++););O.set(t,r),$.set(r,e===s?t:W(t))}return K(e,O.get(t))})),C=e=>{L(T,K(c,e))},N=(e,r)=>{switch(e){case i:if(null==r)return D;case n:if(typeof r===a)return $.get(r);if(!(r instanceof le))for(const e in r)r[e]=_(r[e]);return r;case s:if(typeof r===c){if(!$.has(r)){const e=function(...e){return t&&e.at(0)instanceof Event&&o(...e),L(u,K(s,r),R(this),e.map(R))};return $.set(r,new WeakRef(e)),V(r,C,{return:e,token:!1})}return $.get(r).deref()}return $.get(r);case l:return ye(r)}return r},_=e=>Y(e,N),j={[u]:(e,t,r)=>R(e.apply(t,r)),[p]:(e,t)=>R(new e(...t)),[y]:(e,t,r)=>R(X(e,t,r)),[g]:(e,t)=>R(Z(e,t)),[h]:e=>R(te(e)),[w]:(e,t)=>R(e[t]),[d]:(e,t)=>{const r=ee(e,t);return r?K(i,fe(r,R)):K(f,r)},[b]:(e,t)=>R(t in e),[m]:e=>R(re(e)),[v]:e=>K(n,ne(e).map(R)),[E]:e=>R(se(e)),[P]:(e,t,r)=>R(oe(e,t,r)),[k]:(e,t)=>R(ae(e,t)),[T](e){O.delete($.get(e)),$.delete(e)}};return r[M]=(e,t,...r)=>{switch(e){case u:r[0]=_(r[0]),r[1]=r[1].map(_);break;case p:r[0]=r[0].map(_);break;case y:{const[e,t]=r;r[0]=_(e);const{get:n,set:s,value:o}=t;n&&(t.get=_(n)),s&&(t.set=_(s)),o&&(t.value=_(o));break}default:r=r.map(_)}return j[e](_(t),...r)},{proxy:r,[e.toLowerCase()]:D,[`is${e}Proxy`]:()=>!1}}})("Window",!0),de=(e=>{let t=0;const r=new Map,o=new Map,f=Symbol();return function(M,S,x){const A=this?.transform||ge,{[S]:W}=M,O=new Map,$=e=>{O.delete(e),W(T,L(e))},L=ue(((e,n)=>{if(f in n)return z(n[f]);if(e===s){if(n=A(n),!o.has(n)){let e;for(;o.has(e=String(t++)););r.set(n,e),o.set(e,n)}return K(e,r.get(n))}if(!(n instanceof le)){n=A(n);for(const e in n)n[e]=L(n[e])}return K(e,n)})),D=(e,t,r)=>{if(!O.has(r)){const n=t===s?(e=>F.bind(e))(e):e,o=new Proxy(n,N);return O.set(r,new WeakRef(o)),V(r,$,{return:o,token:!1})}return O.get(r).deref()},R=e=>Y(e,((t,r)=>{switch(t){case i:if(null===r)return globalThis;case n:return typeof r===a?D(e,t,r):r;case s:return typeof r===c?o.get(r):D(e,t,r);case l:return ye(r)}return r})),C=(e,t,...r)=>R(W(e,z(t),...r)),N={[u]:(e,t,r)=>C(u,e,L(t),r.map(L)),[p]:(e,t)=>C(p,e,t.map(L)),[y]:(e,t,r)=>{const{get:n,set:o,value:a}=r;return typeof n===s&&(r.get=L(n)),typeof o===s&&(r.set=L(o)),typeof a===s&&(r.value=L(a)),C(y,e,L(t),r)},[g]:(e,t)=>C(g,e,L(t)),[h]:e=>C(h,e),[w]:(e,t)=>t===f?e:C(w,e,L(t)),[d]:(e,t)=>{const r=C(d,e,L(t));return r&&fe(r,R)},[b]:(e,t)=>t===f||C(b,e,L(t)),[m]:e=>C(m,e),[v]:e=>C(v,e).map(R),[E]:e=>C(E,e),[P]:(e,t,r)=>C(P,e,L(t),L(r)),[k]:(e,t)=>C(k,e,L(t))};M[x]=(e,t,n,s)=>{switch(e){case u:return R(t).apply(R(n),s.map(R));case T:{const e=R(t);r.delete(o.get(e)),o.delete(e)}}};const _=new Proxy(K(i,null),N);return{[e.toLowerCase()]:_,[`is${e}Proxy`]:e=>typeof e===i&&!!e&&f in e,proxy:M}}})("Window"),he=typeof Worker===s?Worker:class{};const be=new WeakMap,me=(e,...n)=>{const s=U(e,...n);if(!be.has(s)){const o=e instanceof he?we:de;be.set(s,o.call(n.at(0),s,t,r))}return be.get(s)};me.transfer=U.transfer;export{me as default};
