var e=Promise.withResolvers.bind(Promise);const{stringify:t}=JSON,[n,s]=((t=e=>e)=>{const n=new Map;let s=0;return[()=>{let o;do{o=t(s++)}while(n.has(o));const a=e();return n.set(o,a),[o,a.promise]},(e,t,s)=>{const o=n.get(e);n.delete(e),s?o?.reject(s):o?.resolve(t)}]})(),o=e=>new Response(`[${e.join(",")}]`),a=e=>new Response(t(e)),{protocol:i,host:r,pathname:l}=location,c=`${i}//${r}${l}?sabayon`,d=new BroadcastChannel("dc78209b-186c-4f83-80e9-406becb7d9f3");d.onmessage=e=>s.apply(null,e.data);addEventListener("activate",e=>e.waitUntil(clients.claim())),addEventListener("fetch",e=>{const{request:t}=e;"POST"===t.method&&t.url===c&&(e.stopImmediatePropagation(),e.respondWith(t.json().then(([e,t])=>{const[s,i]=n();return d.postMessage([s,e,t]),i.then(o,a)},a)))}),addEventListener("install",()=>skipWaiting());
