var e=Promise.withResolvers.bind(Promise);const{parse:t}=JSON,[n,s]=((t=e=>e)=>{const n=new Map;let s=0;return[()=>{let a;do{a=t(s++)}while(n.has(a));const o=e();return n.set(a,o),[a,o.promise]},(e,t,s)=>{const a=n.get(e);n.delete(e),s?a?.reject(s):a?.resolve(t)}]})(),a=`${location.href}?sabayon`,o=new BroadcastChannel("dc78209b-186c-4f83-80e9-406becb7d9f3");o.onmessage=e=>s.apply(null,e.data),addEventListener("activate",(e=>e.waitUntil(clients.claim()))),addEventListener("install",(()=>skipWaiting())),addEventListener("fetch",(async e=>{const{request:i}=e;if("POST"===i.method&&i.url===a){e.stopImmediatePropagation(),e.preventDefault();const[a,r]=n();e.respondWith(r.then((e=>new Response(`[${e.join(",")}]`))));const[c,l]=t(await i.text());o.postMessage([a,c,l]),s(r)}}));
