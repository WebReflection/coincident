var e=Promise.withResolvers.bind(Promise);const[t,n]=((t=e=>e)=>{const n=new Map;let s=0;return[()=>{let a;do{a=t(s++)}while(n.has(a));const o=e();return n.set(a,o),[a,o.promise]},(e,t,s)=>{const a=n.get(e);n.delete(e),s?a?.reject(s):a?.resolve(t)}]})(),{stringify:s}=JSON,a={status:200,statusText:"OK",headers:{"Cache-Control":"no-cache, no-store, max-age=0","Content-Type":"application/json",Pragma:"no-cache"}},o=e=>new Response(`[${e.join(",")}]`,a),i=e=>new Response(s(e),a),{protocol:r,host:c,pathname:l}=location,d=`${r}//${c}${l}?sabayon`,p=new BroadcastChannel("dc78209b-186c-4f83-80e9-406becb7d9f3");p.onmessage=e=>n.apply(null,e.data);addEventListener("activate",e=>e.waitUntil(clients.claim())),addEventListener("fetch",e=>{const{request:n}=e;"POST"===n.method&&n.url===d&&(e.stopImmediatePropagation(),e.respondWith(n.json().then(([e,n])=>{const[s,a]=t();return p.postMessage([s,e,n]),a.then(o,i)},i)))}),addEventListener("install",()=>skipWaiting());
