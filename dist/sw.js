var e=Promise.withResolvers.bind(Promise);const[t,n]=((t=e=>e)=>{const n=new Map;let s=0;return[()=>{let o;do{o=t(s++)}while(n.has(o));const a=e();return n.set(o,a),[o,a.promise]},(e,t,s)=>{const o=n.get(e);n.delete(e),s?o?.reject(s):o?.resolve(t)}]})(),{stringify:s}=JSON,o=e=>new Response(`[${e.join(",")}]`),a=e=>new Response(s(e)),{protocol:i,host:r,pathname:l}=location,c=`${i}//${r}${l}?sabayon`,d=new BroadcastChannel("dc78209b-186c-4f83-80e9-406becb7d9f3");d.onmessage=e=>n.apply(null,e.data);addEventListener("activate",e=>e.waitUntil(clients.claim())),addEventListener("fetch",e=>{const{request:n}=e;"POST"===n.method&&n.url===c&&(e.stopImmediatePropagation(),e.respondWith(n.json().then(([e,n])=>{const[s,i]=t();return d.postMessage([s,e,n]),i.then(o,a)},a)))}),addEventListener("install",()=>skipWaiting());
