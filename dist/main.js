const e="72ba9dfa",t="="+e,s="-"+e;var n=Promise.withResolvers.bind(Promise),r=(e=e=>e)=>{const t=new Map;let s=0;return[()=>{let r;do{r=e(s++)}while(t.has(r));const a=n();return t.set(r,a),[r,a.promise]},(e,s,n)=>{const r=t.get(e);t.delete(e),n?r?.reject(n):r?.resolve(s)}]};let a=0;const o=a++,c=a++,i=a++,l=a++,u=a++,h=a++,p=a++,f=a++,g=a++,d=a++,b=a++,y=a++,m=a++,w=a++,k=a++,v=a++,T=a++,M=a++,S=a++,x=a++,A=a++,E=a++,O=a++,$=a++,R=a++,B=a++;const U=globalThis.ImageData||class{};class j{static push(e,t){e.sync(!1),e._(t,t.length)}constructor(e,t){const s=[];this.l=0,this.o=s,this.v=new Uint8Array(e,t),this.push=s.push.bind(s)}get length(){return this.l+this.o.length}sync(e){const t=this.o,s=t.length;s&&this._(e?t:t.splice(0),s)}_(e,t){const{buffer:s,byteOffset:n}=this.v,r=this.l;this.l+=t,t+=n+r,s.byteLength<t&&s.grow(t),this.v.set(e,r)}}const L=new Map(Reflect.ownKeys(Symbol).map(e=>[Symbol[e],`@${String(e)}`])),P=e=>L.get(e)||((e,t)=>void 0===t?"?":void 0===Symbol.keyFor(e)?`!${t}`:`#${t}`)(e,e.description),I=Array.isArray,D=ArrayBuffer.isView;new TextDecoder;const N=new TextEncoder,_=new ArrayBuffer(8),W=new DataView(_),z=new Uint8Array(_),{getPrototypeOf:C}=Object,{construct:F}=Reflect,{toStringTag:J}=Symbol,q=(e,t=e[J])=>t in globalThis?t:q(F(C(e.constructor),[0])),{isNaN:H,isFinite:K,isInteger:V}=Number,{ownKeys:X}=Reflect,{is:Y}=Object,G=(e,t,s)=>{const n=s.get(e),r=!n;return r?(W.setUint32(0,t.length,!0),s.set(e,[z[0],z[1],z[2],z[3]])):t.push(B,n[0],n[1],n[2],n[3]),r},Q=(e,t,s)=>{W.setUint32(0,s,!0),e.push(t,z[0],z[1],z[2],z[3])},Z=(e,t,s)=>{switch(typeof e){case"number":e&&K(e)?V(e)&&e<256&&-1<e?t.push(h,e):(W.setFloat64(0,e,!0),t.push(u,z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7])):H(e)?t.push(p):e?t.push(e<0?g:f):t.push(Y(e,0)?d:b);break;case"object":switch(!0){case null===e:t.push(l);break;case!G(e,t,s):break;case I(e):{const n=e.length;Q(t,v,n);for(let r=0;r<n;r++)Z(e[r],t,s);break}case D(e):if(t.push($),Z(q(e),t,s),e=e.buffer,!G(e,t,s))break;case e instanceof ArrayBuffer:{const s=new Uint8Array(e);Q(t,T,s.length),ee(t,s);break}case e instanceof Date:t.push(M),Z(e.getTime(),t,s);break;case e instanceof Map:Q(t,x,e.size);for(const[n,r]of e)Z(n,t,s),Z(r,t,s);break;case e instanceof Set:Q(t,O,e.size);for(const n of e)Z(n,t,s);break;case e instanceof Error:t.push(S),Z(e.name,t,s),Z(e.message,t,s),Z(e.stack,t,s);break;case e instanceof U:t.push(R),Z(e.data,t,s),Z(e.width,t,s),Z(e.height,t,s),Z(e.colorSpace,t,s),Z(e.pixelFormat,t,s);break;case e instanceof RegExp:t.push(E),Z(e.source,t,s),Z(e.flags,t,s);break;default:if("toJSON"in e){const n=e.toJSON();Z(n===e?null:n,t,s)}else{const n=X(e),r=n.length;Q(t,A,r);for(let a=0;a<r;a++){const r=n[a];Z(r,t,s),Z(e[r],t,s)}}}break;case"string":if(G(e,t,s)){const s=N.encode(e);Q(t,w,s.length),ee(t,s)}break;case"boolean":t.push(e?c:o);break;case"symbol":t.push(k),Z(P(e),t,s);break;case"bigint":{let s=y;9223372036854775807n<e?(W.setBigUint64(0,e,!0),s=m):W.setBigInt64(0,e,!0),t.push(s,z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7]);break}default:t.push(i)}};let ee=(e,t)=>{for(let s=e.push,n=0,r=t.length;n<r;n+=32767)s.apply(e,t.subarray(n,n+32767))};const te=({byteOffset:e=0,Array:t=j}={})=>(s,n)=>{const r=new t(n,e);ee=t.push,Z(s,r,new Map);const a=r.length;return r.sync(!0),a},se=[],ne=new WeakSet,re=(...e)=>(ne.add(e),e);let{SharedArrayBuffer:ae}=globalThis,oe=!0;try{new ae(4,{maxByteLength:8})}catch(e){oe=!1,ae=class extends ArrayBuffer{get growable(){return super.resizable}grow(e){super.resize(e)}}}const{assign:ce,create:ie}=Object,le=`coincident-${oe?crypto.randomUUID():Math.random().toString(36).substring(2)}`,ue={byteOffset:2*Int32Array.BYTES_PER_ELEMENT},he=(e,t,s)=>{const n="then"!==t;return n&&(e[t]=s),n},pe=e=>{e.stopImmediatePropagation(),e.preventDefault()},fe=(e,t=-1)=>e?.reflected_ffi_timeout??t,{defineProperty:ge}=Object,[de,be]=r();let[ye,me]=de(),we=()=>me,{Atomics:ke,MessageChannel:ve,Worker:Te}=globalThis;if(oe)be(ye);else{const e=new Map,t=(e,...t)=>{e.addEventListener(...t)};if("importScripts"in globalThis){t(globalThis,"message",e=>{pe(e),be(ye,e.data)},{once:!0});const{wait:s}=ke,{parse:n}=JSON,r=t=>{const s=new XMLHttpRequest;try{if(s.timeout=3e3,s.open("POST",`${c}?sabayon`,!1),s.setRequestHeader("Content-Type","application/json"),s.send(`["${o}",${e.get(t)}]`),200===s.status)return s;throw s}catch{return s.abort(),r(t)}},a=(e,t)=>(e.set(n(t.responseText)),"ok");let o,c;ke={wait:(t,...n)=>e.has(t)?a(t,r(t)):s(t,...n)},me=me.then(e=>{[o,c]=e})}else{const s=[le,Math.random()].join("-").replace(/\W/g,"-"),r=new BroadcastChannel("dc78209b-186c-4f83-80e9-406becb7d9f3");r.onmessage=async t=>{const[n,a,o]=t.data;if(a===s)for(const[t,[s,a]]of e)if(s===o){await a.promise;let e=t.length;for(;e--&&!t[e];);r.postMessage([n,t.slice(0,e+1)]);break}};const a=t=>{const[s,r,a]=t.data;e.set(r,[s,n()]),ge(t,"data",{value:a})};ve=class extends ve{constructor(){super(),t(this.port1,"message",a)}},Te=class extends Te{constructor(e,t){super(e,t),super.postMessage([s,c])}};const{notify:o}=ke;ke={notify(t,...s){const n=e.get(t);return n?(n[1].resolve(),0):o(t,...s)}};let c="",i=null;const l=(e,s)=>{let n,r=!0;e.getRegistration(c).then(t=>t??e.register(c,s)).then(function s(a){const{controller:o}=e;if(r=r&&!!o,n=a.installing||a.waiting||a.active,"activated"===n.state){if(r){if(o.scriptURL===c)return be(ye);a.unregister()}location.reload()}else t(n,"statechange",()=>s(a),{once:!0})})};we=(e,t)=>{if(!i){const s=new URL(e,location.href);c=`${s.protocol}//${s.host}${s.pathname}`,l(navigator.serviceWorker,t),i=me}return i}}}const Me="InstallTrigger"in globalThis?le:"",Se=e=>e,xe=e=>e===t?"main":e===s?"worker":e;class Ae extends Event{#e;constructor(e){super("message"),this.#e=e}get data(){return this.#e}}var Ee=e=>{const t=e?.transform,s=fe(e),n=(e?.encoder||te)(ue),a=!1!==e?.transfer;return{Worker:class extends Te{constructor(e,o){const c=oe?"":o?.serviceWorker||"",{notify:i}=c?ke:Atomics,{port1:l,port2:u}=new(c?ve:MessageChannel),[h,p]=r(Se),f=new Map,g=ie(null);c&&we(c);let d="";super(e,ce({type:"module"},o)),this.proxy=new Proxy(g,{get:(e,s)=>{if("then"===s)return;let n=f.get(s);return n||f.set(s,n=(...e)=>{const n=((e,t)=>{let s=se;return e&&ne.has(t.at(-1)||se)&&(s=t.pop(),ne.delete(s)),s})(a,e),[r,o]=h();return l.postMessage([r,s,t?e.map(t):e],n),((e,t)=>{if(d){const s=setTimeout(console.warn,3e3,`ðŸ’€ðŸ”’ - is proxy.${xe(d)}() awaiting proxy.${xe(t)}() ?`);e=e.then(e=>(clearTimeout(s),e),e=>(clearTimeout(s),Promise.reject(e)))}return e})(o,s)}),n},set:he}),Me&&(oe||c)&&super.addEventListener("message",e=>{const{data:t}=e;t?.ID===Me&&(pe(e),l.dispatchEvent(new Ae(t.data)))}),super.postMessage([Me,c,fe(o,s)],[u]),l.addEventListener("message",async({data:e})=>{const s=e[0],r=typeof s;if("number"===r)p.apply(null,e);else if(d=e[1],await(async(e,t,s)=>{try{const n=await t[e[1]].apply(null,e[2]);e[1]=s?s(n):n,e[2]=null}catch(t){e[2]=t}})(e,g,t),d="","string"===r)l.postMessage(e);else{const t=e[2]||e[1];s[1]=void 0===t?0:n(t,s.buffer),s[0]=1,i(s,0)}}),l.start()}},native:oe,transfer:re}};export{Ee as default};
