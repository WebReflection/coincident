/*! (c) Andrea Giammarchi - ISC */
const e="3a094819-8d6b-4f32-8151-44ecb9297a0d",{Atomics:t,Error:s,Int32Array:a,JSON:n,Map:r,Proxy:o,SharedArrayBuffer:i,String:d,Uint16Array:w,WeakMap:c}=globalThis,{BYTES_PER_ELEMENT:f}=a,{BYTES_PER_ELEMENT:g}=w,{fromCharCode:l}=d,E=new c;let h=0;var p=(d,{parse:c,stringify:p}=n)=>(E.has(d)||E.set(d,new o(new r,{get:(s,n)=>(...s)=>{const r=h++;let o=new i(f),E=new a(o);d.postMessage({[e]:{action:n,args:s,id:r,sb:o}}),t.wait(E,0);const p=t.load(E,0),y=g*p;o=new i(y+y%f),E=new a(o),d.postMessage({[e]:{id:r,sb:o}}),t.wait(E,0);let b="";for(let e=new w(o),s=0;s<p;s++)b+=l(t.load(e,s));return c(b)},set(n,o,i){if(!n.size){const o=new r;d.addEventListener("message",(async({data:r})=>{if(r?.[e]){const{action:i,args:d,id:c,sb:f}=r[e],g=new a(f);if(i){if(!n.has(i))throw new s(`Unsupported action: ${i}`);{const e=p(await n.get(i)(...d));o.set(c,e),t.store(g,0,e.length),t.notify(g,0)}}else{const e=o.get(c);o.delete(c);for(let t=new w(f),s=0;s<e.length;s++)t[s]=e.charCodeAt(s);t.notify(g,0)}}}))}return!!n.set(o,i)}})),E.get(d));export{p as default};
