/*! (c) Andrea Giammarchi - ISC */
const e="a073b3d7-2b7f-4675-ba44-a25231e5d9ef",{Atomics:t,Error:n,Int32Array:a,JSON:r,Map:s,Proxy:o,SharedArrayBuffer:i,String:f,Uint16Array:w,WeakMap:d}=globalThis,{BYTES_PER_ELEMENT:c}=a,{BYTES_PER_ELEMENT:l}=w,{fromCharCode:g}=f,E=new d;let h=0;var y=(f,{parse:d,stringify:y}=r)=>{if(!E.has(f)){const r=(t,n,a,r)=>f.postMessage({[e]:{id:t,sb:n,action:a,args:r}});E.set(f,new o(new s,{get:(e,n)=>(...e)=>{const s=h++;let o=new i(c),f=new a(o);r(s,o,n,e),t.wait(f,0);const E=t.load(f,0),y=l*E;o=new i(y+y%c),f=new a(o),r(s,o),t.wait(f,0);let p="";for(let e=new w(o),n=0;n<E;n++)p+=g(t.load(e,n));return d(p)},set(r,o,i){if(!r.size){const o=new s;f.addEventListener("message",(async({data:s})=>{if(s?.[e]){const{action:i,args:f,id:d,sb:c}=s[e],l=new a(c);if(i){if(!r.has(i))throw new n(`Unsupported action: ${i}`);{const e=y(await r.get(i)(...f));o.set(d,e),t.store(l,0,e.length),t.notify(l,0)}}else{const e=o.get(d);o.delete(d);for(let t=new w(c),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);t.notify(l,0)}}}))}return!!r.set(o,i)}}))}return E.get(f)};export{y as default};
