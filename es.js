var e=e=>({value:new Promise((t=>{let n=new Worker("data:application/javascript,"+encodeURIComponent('onmessage=({data:b})=>(Atomics.wait(b,0),postMessage("ok"))'));n.onmessage=t,n.postMessage(e)}))})
/*! (c) Andrea Giammarchi - ISC */;const t="eef159e0-b39b-4e0e-b711-43432daf4928",{Int32Array:n,Map:s,SharedArrayBuffer:a,Uint16Array:r}=globalThis,{BYTES_PER_ELEMENT:o}=n,{BYTES_PER_ELEMENT:i}=r,{isArray:c}=Array,{notify:l,wait:w,waitAsync:f}=Atomics,{fromCharCode:d}=String,g=(t,n)=>t?(f||e)(n,0):(w(n,0),{value:{then:e=>e()}}),h=new WeakSet,p=new WeakMap;let u=0;const E=(e,{parse:w,stringify:f}=JSON)=>{if(!p.has(e)){const E=(n,...s)=>e.postMessage({[t]:s},{transfer:n});p.set(e,new Proxy(new s,{get:(t,s)=>"then"===s?null:(...t)=>{const c=u++;let l=new a(o);const f=new n(l);let p=[];h.has(t.at(-1)||p)&&h.delete(p=t.pop()),E(p,c,l,s,t);const y=e instanceof Worker;return g(y,f).value.then((()=>{const e=f[0];if(!e)return;const t=i*e;return l=new a(t+t%o),E([],c,l),g(y,new n(l)).value.then((()=>w(d(...new r(l).slice(0,e)))))}))},set(a,o,i){if(!a.size){const o=new s;e.addEventListener("message",(async({data:e})=>{const s=e?.[t];if(c(s)){const[e,t,...i]=s,c=new n(t);if(i.length){const[t,n]=i;if(!a.has(t))throw new Error(`Unsupported action: ${t}`);{const s=f(await a.get(t)(...n));s&&(o.set(e,s),c[0]=s.length)}}else{const n=o.get(e);o.delete(e);for(let e=new r(t),s=0;s<n.length;s++)e[s]=n.charCodeAt(s)}l(c,0)}}))}return!!a.set(o,i)}}))}return p.get(e)};E.transfer=(...e)=>(h.add(e),e);export{E as default};
