var e=e=>({value:new Promise((t=>{let n=new Worker("data:application/javascript,"+encodeURIComponent('onmessage=({data:b})=>(Atomics.wait(b,0),postMessage("ok"))'));n.onmessage=t,n.postMessage(e)}))})
/*! (c) Andrea Giammarchi - ISC */;const t="cbdc3d3e-e212-4a5c-abde-c61ed4758492",{Int32Array:n,Map:a,SharedArrayBuffer:s,Uint16Array:r}=globalThis,{BYTES_PER_ELEMENT:o}=n,{BYTES_PER_ELEMENT:c}=r,{isArray:i}=Array,{notify:l,wait:f,waitAsync:d}=Atomics,{fromCharCode:w}=String,g=(t,n)=>t?(d||e)(n,0):(f(n,0),{value:{then:e=>e()}}),h=new WeakSet,p=new WeakMap;let u=0;const E=(e,{parse:f,stringify:d}=JSON)=>{if(!p.has(e)){const E=(n,...a)=>e.postMessage({[t]:a},{transfer:n});p.set(e,new Proxy(new a,{get:(t,a)=>"then"===a?null:(...t)=>{const i=u++;let l=new n(new s(o)),d=[];h.has(t.at(-1)||d)&&h.delete(d=t.pop()),E(d,i,l,a,t);const p=e instanceof Worker;return g(p,l).value.then((()=>{const e=l[0];if(!e)return;const t=c*e;return l=new n(new s(t+t%o)),E([],i,l),g(p,l).value.then((()=>f(w(...new r(l.buffer).slice(0,e)))))}))},set(n,s,o){if(!n.size){const s=new a;e.addEventListener("message",(async({data:e})=>{const a=e?.[t];if(i(a)){const[e,t,...o]=a;if(o.length){const[a,r]=o;if(!n.has(a))throw new Error(`Unsupported action: ${a}`);{const o=d(await n.get(a)(...r));o&&(s.set(e,o),t[0]=o.length)}}else{const n=s.get(e);s.delete(e);for(let e=new r(t.buffer),a=0;a<n.length;a++)e[a]=n.charCodeAt(a)}l(t,0)}}))}return!!n.set(s,o)}}))}return p.get(e)};E.transfer=(...e)=>(h.add(e),e);export{E as default};
