/*! (c) Andrea Giammarchi - ISC */
const e="198405d2-5d0e-4d7a-bc32-c27392730449",{Atomics:t,Error:s,Int32Array:n,JSON:a,Map:r,Proxy:o,SharedArrayBuffer:i,String:d,Uint16Array:w,WeakMap:c}=globalThis,{BYTES_PER_ELEMENT:g}=n,{BYTES_PER_ELEMENT:l}=w,{fromCharCode:f}=d,E=new c;let h=0;var p=(d,{parse:c,stringify:p}=a)=>(E.has(d)||E.set(d,new o(new r,{get:(s,a)=>(...s)=>{const r=h++;let o=new i(g),E=new n(o);d.postMessage({[e]:{action:a,args:s,id:r,sb:o}}),t.wait(E,0);const p=t.load(E,0),y=l*p;o=new i(y+y%g),E=new n(o),d.postMessage({[e]:{id:r,sb:o}}),t.wait(E,0);let M="";for(let e=new w(o),s=0;s<p;s++)M+=f(t.load(e,s));return c(M)},set(a,o,i){if(!a.size){const o=new r;d.addEventListener("message",(async({data:r})=>{if(r[e]){const{action:i,args:d,id:c,sb:g}=r[e],l=new n(g);if(i){if(!a.has(i))throw new s(`Unsupported action: ${i}`);{const e=p(await a.get(i)(...d));o.set(c,e),t.store(l,0,e.length),t.notify(l,0)}}else{const e=o.get(c);o.delete(c);for(let t=new w(g),s=0;s<e.length;s++)t[s]=e.charCodeAt(s);t.notify(l,0)}}}))}return a.set(o,i),!0}})),E.get(d));export{p as default};
