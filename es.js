/*! (c) Andrea Giammarchi - ISC */
const e="afb2af69-0411-4ea1-86a6-2cb839e71db4",{Atomics:t,Error:n,Int32Array:a,JSON:r,Map:s,Proxy:o,SharedArrayBuffer:i,String:f,Uint16Array:w,WeakMap:c}=globalThis,{BYTES_PER_ELEMENT:d}=a,{BYTES_PER_ELEMENT:l}=w,{fromCharCode:g}=f,E=new c;let h=0;var y=(f,{parse:c,stringify:y}=r)=>{if(!E.has(f)){const r=(t,n,a,r)=>f.postMessage({[e]:{id:t,sb:n,action:a,args:r}});E.set(f,new o(new s,{get:(e,n)=>(...e)=>{const s=h++;let o=new i(d),f=new a(o);r(s,o,n,e),t.wait(f,0);const E=t.load(f,0),y=l*E;o=new i(y+y%d),f=new a(o),r(s,o),t.wait(f,0);let p="";for(let e=new w(o),n=0;n<E;n++)p+=g(t.load(e,n));return c(p)},set(r,o,i){if(!r.size){const o=new s;f.addEventListener("message",(async({data:s})=>{if(s?.[e]){const{action:i,args:f,id:c,sb:d}=s[e],l=new a(d);if(i){if(!r.has(i))throw new n(`Unsupported action: ${i}`);{const e=y(await r.get(i)(...f));o.set(c,e),t.store(l,0,e.length),t.notify(l,0)}}else{const e=o.get(c);o.delete(c);for(let t=new w(d),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);t.notify(l,0)}}}))}return!!r.set(o,i)}}))}return E.get(f)};export{y as default};
