const e="5f50bb1c-57c3-47af-b36a-392fe80f8803";var t=e=>({value:new Promise((t=>{let a=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");a.onmessage=t,a.postMessage(e)}))})
/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:a,Map:s,SharedArrayBuffer:n,Uint16Array:r}=globalThis,{BYTES_PER_ELEMENT:o}=a,{BYTES_PER_ELEMENT:i}=r,{isArray:l}=Array,{notify:f,wait:c,waitAsync:d}=Atomics,{fromCharCode:p}=String,g=new WeakSet,w=new WeakMap,u={value:{then:e=>e()}},h=()=>{};let y=0;const m=(m,{parse:E=JSON.parse,stringify:b=JSON.stringify,transform:A,interrupt:v}=JSON)=>{if(!w.has(m)){const S=(t,...a)=>m.postMessage({[e]:a},{transfer:t}),T="function"==typeof v?v:v?.handler||h,M=v?.delay||42,P=(e,a)=>e?(d||t)(a,0):(((e,t,a)=>{for(;"timed-out"===c(e,0,0,t);)a()})(a,M,T),u);let C=!1;w.set(m,new Proxy(new s,{has:(e,t)=>"string"==typeof t&&!t.startsWith("_"),get:(e,t)=>"then"===t?null:(...e)=>{const s=y++;let l=new a(new n(o)),f=[];g.has(e.at(-1)||f)&&g.delete(f=e.pop()),S(f,s,l,t,A?e.map(A):e);const c=m!==globalThis;let d=0;return C&&c&&(d=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${t}(...args) is awaited`)),P(c,l).value.then((()=>{clearTimeout(d);const e=l[0];if(!e)return;const t=i*e;return l=new a(new n(t+t%o)),S([],s,l),P(c,l).value.then((()=>E(p(...new r(l.buffer).slice(0,e)))))}))},set(t,a,n){if(!t.size){const a=new s;m.addEventListener("message",(async s=>{const n=s.data?.[e];if(l(n)){s.stopImmediatePropagation();const[e,o,...i]=n;if(i.length){const[s,n]=i;if(!t.has(s))throw new Error(`Unsupported action: ${s}`);C=!0;try{const r=await t.get(s)(...n);if(void 0!==r){const t=b(A?A(r):r);a.set(e,t),o[0]=t.length}}finally{C=!1}}else{const t=a.get(e);a.delete(e);for(let e=new r(o.buffer),a=0;a<t.length;a++)e[a]=t.charCodeAt(a)}f(o,0)}}))}return!!t.set(a,n)}}))}return w.get(m)};m.transfer=(...e)=>(g.add(e),e);export{m as default};
